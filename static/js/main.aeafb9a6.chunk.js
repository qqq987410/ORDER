(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{18:function(e,t,n){e.exports={main:"Home_main__Ugy63",theme:"Home_theme__StcS2",target1:"Home_target1___DDmn",target2:"Home_target2__3rKQP"}},21:function(e,t,n){e.exports={main:"Main_main__23tKO",leftSide:"Main_leftSide__100ob",rightSide:"Main_rightSide__LHA6Q",store:"Main_store__2v70R"}},26:function(e,t,n){e.exports={navbar:"App_navbar__BoB5D",logo:"App_logo__2qPv-"}},42:function(e,t,n){},51:function(e,t,n){},52:function(e,t,n){},53:function(e,t,n){"use strict";n.r(t);var s=n(3),c=n(4),o=n(33),a=n.n(o),i=(n(42),n(15)),r=n(26),d=n.n(r),l=n(13),u=n(7),b=n(17);n(43),n(44);b.a.initializeApp({apiKey:"AIzaSyBnIZz9XKePiURWd1lArnKnZqgcHDk0xkQ",authDomain:"order-7cbbf.firebaseapp.com",databaseURL:"https://order-7cbbf.firebaseio.com",projectId:"order-7cbbf",storageBucket:"order-7cbbf.appspot.com",messagingSenderId:"700424911597",appId:"1:700424911597:web:eca4d134324ce1b59b6ae4"});var j=b.a.firestore(),h=new b.a.auth.FacebookAuthProvider;function f(){b.a.auth().signInWithPopup(h).then((function(e){e.credential.accessToken;var t=e.additionalUserInfo.profile.name,n=e.additionalUserInfo.profile.email,s=e.user.uid;console.log("\u60a8\u88ab\u9078\u4e2d\u5165\u5bae\u7576\u79c0\u5973\u56c9",e),j.collection("users").doc(s).set({userName:t,userEmail:n,userHistoryOrder:""}).then((function(){console.log("Add successful")}))})).catch((function(e){console.log("\u767b\u5165\u5931\u6557",e)}))}function g(){b.a.auth().signOut().then((function(){localStorage.removeItem("accessToken"),console.log("\u60a8\u88ab\u9010\u51fa\u7d2b\u7981\u57ce\u4e86")}))}var m=n(18),v=n.n(m);var O=function(){var e=Object(c.useState)(""),t=Object(i.a)(e,2),n=t[0],o=t[1],a=Object(u.f)();return Object(s.jsx)("div",{className:v.a.main,children:Object(s.jsxs)("div",{className:v.a.theme,children:[Object(s.jsxs)("div",{className:v.a.target1,children:[Object(s.jsx)("h2",{children:"\u4eca\u5929\u4f86\u9ede...\uff1f"}),Object(s.jsx)("form",{onSubmit:function(){o(""),a.push("/main?search=".concat(encodeURI(n)))},children:Object(s.jsx)("input",{type:"text",value:n,placeholder:"\u60f3\u5403...",onChange:function(e){o(e.target.value)}})})]}),Object(s.jsxs)("div",{className:v.a.target2,children:[Object(s.jsx)("h2",{className:v.a.h2,children:"\u662f\u4e0d\u662f\u7336\u8c6b\u4e0d\u6c7a?"}),Object(s.jsx)("button",{children:"\u5927\u5bb6\u66ff\u6211\u505a\u6c7a\u5b9a"})]})]})})},p=n(36),x=n(21),_=n.n(x),N=n(35),y=n.p+"static/media/time.3ad02d15.svg";var H=function(e){N.a.auth().onAuthStateChanged((function(e){e?console.log("\u5224\u65b7\u767b\u9304\u72c0\u614bsuccess\uff1d",e):console.log("\u5224\u65b7\u767b\u9304\u72c0\u614bfalse")}));var t=window.location.search.slice(8),n=decodeURI(t),o=j.collection("restaurant"),a=Object(c.useState)([]),r=Object(i.a)(a,2),d=r[0],l=r[1],b=Object(c.useState)({}),h=Object(i.a)(b,2),f=h[0],g=h[1];function m(){var e,t,n,c,o=Object(s.jsxs)("div",{children:[" \u71df\u696d\u6642\u9593\uff1a",null===f||void 0===f||null===(e=f.businessHour)||void 0===e?void 0:e[0]]}),a=Object(s.jsxs)("div",{children:["\u71df\u696d\u6642\u9593\uff1a",null===f||void 0===f||null===(t=f.businessHour)||void 0===t?void 0:t[0],"\xa0&\xa0",null===f||void 0===f||null===(n=f.businessHour)||void 0===n?void 0:n[1]]});return Object(s.jsxs)("div",{className:_.a.leftSide,children:[Object(s.jsx)("div",{children:f.title}),Object(s.jsxs)("div",{className:"time",children:[Object(s.jsx)("img",{src:y,alt:"time"}),(null===f||void 0===f||null===(c=f.businessHour)||void 0===c?void 0:c[1])?a:o]}),Object(s.jsxs)("div",{children:["\u5730\u5740\uff1a",null===f||void 0===f?void 0:f.address]}),Object(s.jsxs)("div",{children:["\u96fb\u8a71\uff1a",null===f||void 0===f?void 0:f.phoneNumber]})]})}function v(){return Object(s.jsx)("div",{className:_.a.rightSide,children:d.map((function(e){return console.log(e.title),Object(s.jsx)(O,{title:e.title,category:e.category,businessHour:e.businessHour,phoneNumber:e.phoneNumber,address:e.address,id:e.id},e.id)}))})}function O(e){var t=Object(u.f)();return Object(s.jsx)("div",{className:_.a.store,onClick:function(n){console.log(n.target),console.log(e.title,e.id),t.push("./menu?restaurantID=".concat(e.id))},onMouseEnter:function(t){t.target.style.backgroundColor="#eb4d4b",t.target.style.color="#ffffff",g({title:e.title,category:e.category,businessHour:e.businessHour,phoneNumber:e.phoneNumber,address:e.address,id:e.id,key:e.id})},onMouseLeave:function(e){e.target.style.backgroundColor="#ffffff",e.target.style.color="#eb4d4b"},children:Object(s.jsx)("p",{children:e.title})})}return Object(c.useEffect)((function(){o.orderBy("title").startAt(n).endAt(n+"\uf8ff").get().then((function(e){var t=[];e.forEach((function(e){t.push({address:e.data().address,businessHour:[e.data().businessHour[0],e.data().businessHour[1]],category:e.data().category,phoneNumber:e.data().phoneNumber,title:e.data().title,id:e.id}),l([].concat(Object(p.a)(d),t))}))}))}),[]),Object(s.jsx)("div",{children:Object(s.jsxs)("div",{className:_.a.main,children:[Object(s.jsx)(m,{}),Object(s.jsx)(v,{})]})})};n(51);var S=function(e){var t=window.location.search.slice(14),n=decodeURI(t);console.log(n),console.log(e.data);var c=e.data,o={};return c.forEach((function(e){e.id===n&&(o={address:e.address,businessHour:[e.businessHour[0],e.businessHour[1]],category:e.category,phoneNumber:e.phoneNumber,title:e.title,id:e.id})})),console.log(o),Object(s.jsxs)("div",{children:[Object(s.jsxs)("p",{children:[" ",o.title]}),Object(s.jsx)("p",{children:o.address}),Object(s.jsx)("p",{children:o.phoneNumber})]})};n(52);var I=function(){return Object(s.jsxs)("div",{children:[Object(s.jsx)("button",{onClick:f,children:"FB Log in"}),Object(s.jsx)("button",{onClick:g,children:"FB Log out"})]})},k=n.p+"static/media/Logo.c81f7424.svg";var A=function(){var e=Object(c.useState)([]),t=Object(i.a)(e,2),n=t[0],o=t[1];return Object(c.useEffect)((function(){!function(e){var t=[];j.collection("restaurant").get().then((function(e){return e.forEach((function(e){t.push({address:e.data().address,businessHour:[e.data().businessHour[0],e.data().businessHour[1]],category:e.data().category,phoneNumber:e.data().phoneNumber,title:e.data().title,id:e.id})})),t})).then((function(t){e(t)}))}(o)}),[]),console.log(n),Object(s.jsxs)(l.a,{children:[Object(s.jsxs)("nav",{className:d.a.navbar,children:[Object(s.jsx)("div",{className:d.a.logo,children:Object(s.jsx)(l.b,{to:"/",children:Object(s.jsx)("img",{src:k,alt:"logo"})})}),Object(s.jsx)(l.b,{to:"/main",children:"Main"}),Object(s.jsx)(l.b,{to:"/menu",children:"Menu"}),Object(s.jsx)(l.b,{to:"/login",children:"Login"})]}),Object(s.jsxs)(u.c,{children:[Object(s.jsx)(u.a,{exact:!0,path:"/",children:Object(s.jsx)(O,{})}),Object(s.jsx)(u.a,{path:"/main",children:Object(s.jsx)(H,{data:n})}),Object(s.jsx)(u.a,{path:"/menu",children:Object(s.jsx)(S,{data:n})}),Object(s.jsx)(u.a,{path:"/login",children:Object(s.jsx)(I,{})})]})]})},C=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,54)).then((function(t){var n=t.getCLS,s=t.getFID,c=t.getFCP,o=t.getLCP,a=t.getTTFB;n(e),s(e),c(e),o(e),a(e)}))};a.a.render(Object(s.jsx)(A,{}),document.getElementById("root")),C()}},[[53,1,2]]]);
//# sourceMappingURL=main.aeafb9a6.chunk.js.map